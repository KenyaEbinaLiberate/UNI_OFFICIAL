const n=new(window.AudioContext||window.webkitAudioContext),d=new Audio("/sound.mp3"),r=new Audio("/sound2.mp3");r.loop=!0;const b=n.createMediaElementSource(d),A=n.createMediaElementSource(r),a=n.createAnalyser();a.fftSize=512;const y=a.frequencyBinCount,g=new Uint8Array(y);b.connect(a);A.connect(a);a.connect(n.destination);d.addEventListener("ended",()=>{r.play()});const t=document.getElementById("audioVisualizer"),e=t.getContext("2d"),f=()=>{t.width=120,t.height=window.innerHeight*1.5,t.style.height="175dvh"};f();window.addEventListener("resize",f);let m=!1,p;const C=()=>{a.getByteFrequencyData(g),e.clearRect(0,0,t.width,t.height);const c=t.width,u=y,i=t.height/u;for(let s=0;s<u;s++){const h=g[s]/255,w=Math.max(2,h*c);if(h>0){const o=i*s+i/2;e.beginPath(),e.moveTo(0,o-i/2.5),e.lineTo(0,o+i/2.5),e.lineTo(w,o),e.closePath();const l=e.createLinearGradient(0,o,w,o);l.addColorStop(0,"rgba(0, 0, 255, 1)"),l.addColorStop(1,"rgba(0, 0, 255, 1)"),e.shadowColor="rgba(0, 0, 255, 0)",e.shadowBlur=5,e.shadowOffsetX=-2,e.fillStyle=l,e.fill(),e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0}}p=requestAnimationFrame(C)};window.addEventListener("audioplayerstatechange",c=>{m=c.detail.isPlaying,m?(n.state==="suspended"&&n.resume(),d.play(),C()):(d.pause(),r.pause(),cancelAnimationFrame(p),e.clearRect(0,0,t.width,t.height))});
