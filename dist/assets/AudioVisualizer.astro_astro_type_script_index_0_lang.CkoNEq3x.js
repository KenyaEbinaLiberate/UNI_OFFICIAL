const e=document.getElementById("audioVisualizer"),t=e.getContext("2d");let a,n,i;const o=()=>{e.width=120,e.height=1.5*window.innerHeight,e.style.height="175dvh"};o(),window.addEventListener("resize",o);let d,r=!1;const l=()=>{t.clearRect(0,0,e.width,e.height);const a=e.width,o=n.frequencyBinCount,s=e.height/o;n.getByteFrequencyData(i);for(let e=0;e<o;e++){const n=i[e]/255,o=Math.max(2,n*a);if(n>0){const a=s*e+s/2;t.beginPath(),t.moveTo(0,a-s/2.5),t.lineTo(0,a+s/2.5),t.lineTo(o,a),t.closePath();const n=t.createLinearGradient(0,a,o,a);n.addColorStop(0,"rgba(0, 0, 255, 1)"),n.addColorStop(1,"rgba(0, 0, 255, 1)"),t.shadowColor="rgba(0, 0, 255, 0)",t.shadowBlur=5,t.shadowOffsetX=-2,t.fillStyle=n,t.fill(),t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0}}r&&(d=requestAnimationFrame(l))};window.addEventListener("audioplayerstatechange",(o=>{r=o.detail.isPlaying,o.detail.audioContext&&o.detail.analyser&&(a=o.detail.audioContext,n=o.detail.analyser,i=new Uint8Array(n.frequencyBinCount)),r?("suspended"===a?.state&&a.resume(),l()):(cancelAnimationFrame(d),t.clearRect(0,0,e.width,e.height))}));
